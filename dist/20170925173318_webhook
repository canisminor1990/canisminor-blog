{"tag":["webhook","node","ejs"],"filename":"20170925173318_webhook","body":"\n\n\n\n因为有时候webhook会莫名其妙部署失败，也不知道哪里出了问题，只能ssh到服务器查看log，所以写了一个带图形界面服务端WebHook部署器，可以直接在网页上查看部署命令和执行结果。[GitHub 地址](https://github.com/canisminor1990/webhook)\n\n> 支持: **Github / Coding**\n\n## Demo\n\n可以访问此网站查看 **[Demo](http://hook.canisminor.cc/)**\n\n![shadow](http://qn.canisminor.cc/2017-09-25-Slice-1.png)\n\n## Usage\n\n**克隆项目：**\n\n```bash\n$ git clone git@github.com:canisminor1990/webhook.git\n```\n\n**在 `./config.js` 中设置你的项目：**\n\n> 在nginx设置wehbook接收地址，并为你的项目添加webhook\n\n```js\nconst projects = {\n\texample: { // location pathname -> http://hook.xxxx.xxx/example\n\t\ttype   : 'github',  // github || coding\n\t\tmessage: false, // false || commit message\n\t\tbranch : 'master', // allowed branch\n\t\tdir    : '~/example/', // cd repo path on server\n\t\tbash   : ['git pull', 'yarn build'] // bash command to run\n\t},\n\t...\n}\n\nmodule.exports = {\n\tport     : 8888, // port to listen\n\tmaxLength: 50, // max messages to store\n\tlogPath  : 'log.json', // log path\n\tcommandConnect: '&&', // fish shell change this to \";\"\n\tprojects : projects\n};\n```\n\n**安装设置并启动：**\n\n```bash\n$ npm i -g forever # install forever\n\n$ yarn # install package\n\n$ yarn start # forever start\n```\n\n**Debug:**\n\n```bash\n$ node index.js # debug with log\n```\n\n","title":"WebHook 图形化部署器"}